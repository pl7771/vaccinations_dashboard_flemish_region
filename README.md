# Data engineering project groep 1 Tile
ETL pipeline om covid data up to date te houden


**Alembic**

Alembic is a lightweight database migration tool for usage with the 
SQLAlchemy Database Toolkit for Python <br><br>

Met alembic kan je volgende zaken: 
<li>Table aanmaken/wijzigen/deleten (kolommen, datatypes, constraints, ... )</li>
<li>Je kan rechtstreeks sql laten uitvoeren.</li>
<li>Data toevoegen/verwijderen/updaten</li>

Zolang de build niet in productie staat mag alles in de file<br>
`alembic/versions/2021-10-19_rev0_0c51e3c78861_initial.py`<br>
Je kan migraties autogeneraten er zal gezocht worden `app/models/models.py`

<pre><code>
# Zolang de build niet in productie kan je best de de autogenerated code 
# toevoegen in de initial en de revision terug wegdoen.

$ alembic revision --autogenerate -m "initial"

# Als er in productie nog wijziginen aan models zijn kan je een nieuwe revisie generaten.
# De databank upgraden/downgraden verloopt via volgende commando's

# Databank zal upgrade tot de nieuwste versie
$ alembic upgrade head 

# Databank zal 1 versie gedowngrade worden (1 is een parameter ja kiezen hoeveel)
$ alembic downgrade -1

# Ongewenste downgrades kunnen de data in database wipen, dus pas op!!
</code></pre>
Om consistent te blijven is het best om steeds ook een downgrade toe te voegen. <br>
Vb. als je een kolom toevoegt, verwijder je deze in de downgrade terug.



**Pre-commit hooks (optioneel)**

Documentatie zie https://pre-commit.com/ <br>
Library die ervoor zorgt dat je geen unformatted code kan committen. <br>
De library wordt ge√Ønstalleerd via pipfile.
<pre><code>
#Initial setup
pre-commit install

# Best voor commit
pre-commit run --all-files 

Indien je unformatted code probeer te commiten zal de 
commit falen en de formatting uitgevoerd worden. 
Daarna zou je wel kunnen commiten. 
</code></pre>


